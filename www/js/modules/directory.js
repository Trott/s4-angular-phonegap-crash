!function(){"use strict";var a=function(a){return a.replace(/[^A-Za-z :"'\-]/g," ")};angular.module("directory",[]).config(["$routeProvider",function(a){a.when("/directory",{templateUrl:"directory/searchForm.html",controller:"directorySearchController"}).when("/directory/:keywords",{templateUrl:"directory/searchForm.html",controller:"directorySearchController"})}]).factory("DirectoryService",function(){return{search:function(b,c,d){var e=a(b.searchTerms);window.UCSF&&window.UCSF.Person&&"function"==typeof window.UCSF.Person.search?window.UCSF.Person.search({q:e},c,d):d()}}}).controller("directorySearchController",["$scope","$location","$routeParams","DirectoryService",function(b,c,d,e){b.searchSubmitted=!1;b.loading=!1;b.loadError=!1;b.results={};b.keywords=d.keywords||"";b.search=function(){c.url("/directory/"+a(b.keywords))};b.load=function(){if(d.keywords){b.loading=!0;b.searchSubmitted=!0;b.loadError=!1;e.search({searchTerms:d.keywords},function(a){b.$apply(function(){b.loading=!1;b.loadError=!1;b.results=a})},function(){b.loading=!1;b.loadError=!0})}};b.load()}])}();