var ucsf=ucsf||{};ucsf.ctsiProfile={renderProfile:function(a){"use strict";if(a.hasOwnProperty("Profiles")&&a.Profiles instanceof Array&&a.Profiles.length>0){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=a.Profiles[0],z=document.getElementById("ctsi-menu"),A=document.getElementById("ctsi-header");if(y.hasOwnProperty("Name")){A.innerHTML=y.Name;if(y.hasOwnProperty("PhotoURL")){c=document.createElement("img");c.setAttribute("src","http://src.sencha.io/80/80/"+y.PhotoURL);c.setAttribute("alt","");c.setAttribute("style","border-top-right-radius:0;border-bottom-left-radius:.5em;float:left");d=A.clientHeight;A.setAttribute("style","height:52px;padding-top:20px");z.insertBefore(c,A)}}if(y.hasOwnProperty("Narrative")&&"string"==typeof y.Narrative){b=document.createElement("ol");z.appendChild(b);e=document.createElement("li");f=document.createElement("a");f.setAttribute("href","#");f.setAttribute("onclick","ucsf.ctsiProfile.toggleNarrative(); return false;");g=document.createElement("span");g.setAttribute("class","smallprint");g.setAttribute("id","ctsi-narrative");h=y.Narrative.substring(0,y.Narrative.substring(0,200).lastIndexOf(" "));g.innerHTML=h+"...";document.getElementById("ctsi-narrative-hidden").innerHTML=y.Narrative;f.appendChild(g);e.appendChild(f);b.appendChild(e);c.setAttribute("style","border-top-right-radius:0;float:left")}if(y.hasOwnProperty("Keywords")&&y.Keywords.length>0){i=y.Keywords;j=document.createElement("ol");j.setAttribute("class","research-interests");k=i.length>5?5:i.length;for(l=0;k>l;l+=1){m=document.createElement("li");m.innerHTML=i[l];j.appendChild(m)}n=document.getElementById("ctsi-keywords");n.innerHTML='<h1 class="light">Research Interests</h1>';n.appendChild(j)}if(y.hasOwnProperty("Publications")&&y.Publications.length>0){o=y.Publications;p=document.createElement("ol");q=o.length>5?5:o.length;for(r=0;q>r;r+=1)if(o[r].hasOwnProperty("PublicationTitle")){s=document.createElement("li");t=document.createElement("span");t.setAttribute("class","smallprint");t.innerHTML=o[r].PublicationTitle;if(o[r].hasOwnProperty("PublicationSource")&&o[r].PublicationSource[0].hasOwnProperty("PublicationSourceURL")&&o[r].PublicationSource[0].PublicationSourceURL.length>0){u=document.createElement("a");u.setAttribute("href",o[r].PublicationSource[0].PublicationSourceURL);u.setAttribute("rel","external")}else u=document.createElement("p");u.appendChild(t);s.appendChild(u);p.appendChild(s)}v=document.getElementById("ctsi-publications");v.innerHTML='<h1 class="content-first light">Recent Publications</h1>';v.appendChild(p)}if(y.hasOwnProperty("ProfilesURL")){w=document.createElement("li");x=document.createElement("a");x.innerHTML="Full Research Profile";x.setAttribute("rel","external");x.setAttribute("href",y.ProfilesURL);document.getElementById("ctsi-full-profile");w.appendChild(x);document.getElementById("ctsi-full-profile").appendChild(w)}}},toggleNarrative:function(){"use strict";var a=document.getElementById("ctsi-narrative").innerHTML;document.getElementById("ctsi-narrative").innerHTML=document.getElementById("ctsi-narrative-hidden").innerHTML;document.getElementById("ctsi-narrative-hidden").innerHTML=a}};window.location.search&&window.addEventListener&&window.addEventListener("load",function(){"use strict";var a,b,c=decodeURIComponent(window.location.search),d=c.match(/[&?]fno=([\w.@]+)/);if(null!==d){a=d[1];b=document.createElement("script");b.src="http://profiles.ucsf.edu/CustomAPI/v1/JSONProfile.aspx?FNO="+a+"&callback=ucsf.ctsiProfile.renderProfile&publications=full&mobile=on";document.body.appendChild(b)}},!1);